<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BOOOMERANGS - Генератор Изображений</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }
    
    :root {
      --primary: #3b82f6;
      --primary-dark: #2563eb;
      --primary-light: #60a5fa;
      --secondary: #6366f1;
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-300: #d1d5db;
      --gray-400: #9ca3af;
      --gray-500: #6b7280;
      --gray-600: #4b5563;
      --gray-700: #374151;
      --gray-800: #1f2937;
      --gray-900: #111827;
      --success: #10b981;
      --warning: #f59e0b;
      --error: #ef4444;
      --gradient-start: #3b82f6;
      --gradient-end: #6366f1;
    }
    
    body {
      min-height: 100vh;
      background-color: var(--gray-50);
      color: var(--gray-800);
      padding: 20px;
    }
    
    .container {
      max-width: 1000px;
      margin: 0 auto;
    }
    
    header {
      margin-bottom: 30px;
      text-align: center;
    }
    
    .logo {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: white;
      border: 4px solid var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      color: var(--primary);
      margin: 0 auto 15px;
    }
    
    h1 {
      font-size: 32px;
      margin-bottom: 10px;
      background: linear-gradient(to right, var(--gradient-start), var(--gradient-end));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .subtitle {
      color: var(--gray-500);
      margin-bottom: 20px;
    }
    
    .generator-container {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 20px;
      margin-bottom: 30px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--gray-700);
    }
    
    .input-field {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.2s;
    }
    
    .input-field:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .btn {
      background: linear-gradient(to right, var(--gradient-start), var(--gradient-end));
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 24px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }
    
    .btn:active {
      transform: translateY(0);
    }
    
    .btn-secondary {
      background: white;
      color: var(--primary);
      border: 1px solid var(--primary);
    }
    
    .btn-row {
      display: flex;
      gap: 10px;
    }
    
    .loader {
      display: none;
      text-align: center;
      margin: 20px 0;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(59, 130, 246, 0.1);
      border-left-color: var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .result-container {
      display: none;
      margin-top: 30px;
    }
    
    .image-container {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 20px;
      text-align: center;
      margin-bottom: 20px;
    }
    
    .image-preview {
      max-width: 100%;
      border-radius: 8px;
      margin-bottom: 15px;
    }
    
    .actions {
      margin-top: 20px;
      display: flex;
      gap: 10px;
      justify-content: center;
    }
    
    .svg-container {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 20px;
      margin-top: 30px;
      display: none;
    }
    
    .svg-preview {
      max-width: 100%;
      border-radius: 8px;
      background: var(--gray-100);
      padding: 15px;
      margin-bottom: 15px;
      overflow: hidden;
    }
    
    .svg-preview svg {
      max-width: 100%;
      height: auto;
    }
    
    .theme-selector {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .theme-option {
      padding: 8px 16px;
      border-radius: 20px;
      background: var(--gray-100);
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .theme-option:hover {
      background: var(--gray-200);
    }
    
    .theme-option.active {
      background: var(--primary-light);
      color: white;
    }
    
    /* Адаптивность */
    @media (max-width: 768px) {
      .btn-row {
        flex-direction: column;
      }
      
      .actions {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">B</div>
      <h1>BOOOMERANGS Генератор Изображений</h1>
      <p class="subtitle">Создавайте красивые изображения и конвертируйте их в векторный SVG формат</p>
    </header>
    
    <div class="generator-container">
      <div class="form-group">
        <label for="prompt">Что вы хотите изобразить?</label>
        <input type="text" id="prompt" class="input-field" placeholder="Например: космический корабль в ночном небе">
      </div>
      
      <div class="form-group">
        <label>Выберите тему:</label>
        <div class="theme-selector">
          <div class="theme-option active" data-theme="abstract">Абстракция</div>
          <div class="theme-option" data-theme="space">Космос</div>
          <div class="theme-option" data-theme="nature">Природа</div>
          <div class="theme-option" data-theme="geometric">Геометрия</div>
          <div class="theme-option" data-theme="city">Город</div>
        </div>
      </div>
      
      <div class="btn-row">
        <button id="generate-btn" class="btn">Сгенерировать изображение</button>
        <button id="reset-btn" class="btn btn-secondary">Сбросить</button>
      </div>
    </div>
    
    <div id="loader" class="loader">
      <div class="spinner"></div>
      <p>Создаем изображение...</p>
    </div>
    
    <div id="result-container" class="result-container">
      <div class="image-container">
        <img id="image-preview" class="image-preview" src="" alt="Сгенерированное изображение">
        <div class="actions">
          <button id="convert-svg-btn" class="btn">Конвертировать в SVG</button>
          <button id="download-img-btn" class="btn btn-secondary">Скачать изображение</button>
        </div>
      </div>
      
      <div id="svg-container" class="svg-container">
        <h3>SVG версия</h3>
        <div id="svg-preview" class="svg-preview"></div>
        <div class="actions">
          <button id="download-svg-btn" class="btn">Скачать SVG</button>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Элементы интерфейса
      const promptInput = document.getElementById('prompt');
      const generateBtn = document.getElementById('generate-btn');
      const resetBtn = document.getElementById('reset-btn');
      const loader = document.getElementById('loader');
      const resultContainer = document.getElementById('result-container');
      const imagePreview = document.getElementById('image-preview');
      const convertSvgBtn = document.getElementById('convert-svg-btn');
      const downloadImgBtn = document.getElementById('download-img-btn');
      const svgContainer = document.getElementById('svg-container');
      const svgPreview = document.getElementById('svg-preview');
      const downloadSvgBtn = document.getElementById('download-svg-btn');
      const themeOptions = document.querySelectorAll('.theme-option');
      
      // Переменные для хранения данных
      let currentImageData = '';
      let currentSvgData = '';
      let selectedTheme = 'abstract';
      
      // Обработчик выбора темы
      themeOptions.forEach(option => {
        option.addEventListener('click', function() {
          themeOptions.forEach(opt => opt.classList.remove('active'));
          this.classList.add('active');
          selectedTheme = this.getAttribute('data-theme');
        });
      });
      
      // Обработчик генерации изображения
      generateBtn.addEventListener('click', function() {
        const prompt = promptInput.value.trim() || 'абстрактное изображение';
        
        // Скрываем результаты и показываем загрузку
        resultContainer.style.display = 'none';
        svgContainer.style.display = 'none';
        loader.style.display = 'block';
        
        // Генерируем изображение
        generateCanvasImage(prompt, selectedTheme)
          .then(imageData => {
            // Сохраняем данные изображения
            currentImageData = imageData;
            
            // Показываем результат
            imagePreview.src = imageData;
            loader.style.display = 'none';
            resultContainer.style.display = 'block';
          })
          .catch(error => {
            console.error('Ошибка при генерации изображения:', error);
            loader.style.display = 'none';
            alert('Произошла ошибка при генерации изображения. Пожалуйста, попробуйте еще раз.');
          });
      });
      
      // Обработчик сброса формы
      resetBtn.addEventListener('click', function() {
        promptInput.value = '';
        resultContainer.style.display = 'none';
        svgContainer.style.display = 'none';
        currentImageData = '';
        currentSvgData = '';
        
        // Сбрасываем тему на "абстракция"
        themeOptions.forEach(opt => opt.classList.remove('active'));
        document.querySelector('[data-theme="abstract"]').classList.add('active');
        selectedTheme = 'abstract';
        
        promptInput.focus();
      });
      
      // Обработчик конвертации в SVG
      convertSvgBtn.addEventListener('click', function() {
        if (!currentImageData) return;
        
        // Показываем загрузку
        loader.style.display = 'block';
        
        // Конвертируем в SVG
        convertToSVG(currentImageData, promptInput.value.trim())
          .then(svgData => {
            // Сохраняем SVG данные
            currentSvgData = svgData;
            
            // Показываем результат
            svgPreview.innerHTML = svgData;
            loader.style.display = 'none';
            svgContainer.style.display = 'block';
          })
          .catch(error => {
            console.error('Ошибка при конвертации в SVG:', error);
            loader.style.display = 'none';
            alert('Произошла ошибка при конвертации в SVG. Пожалуйста, попробуйте еще раз.');
          });
      });
      
      // Обработчик скачивания изображения
      downloadImgBtn.addEventListener('click', function() {
        if (!currentImageData) return;
        
        const link = document.createElement('a');
        link.href = currentImageData;
        link.download = 'booomerangs-image.png';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      });
      
      // Обработчик скачивания SVG
      downloadSvgBtn.addEventListener('click', function() {
        if (!currentSvgData) return;
        
        const blob = new Blob([currentSvgData], { type: 'image/svg+xml' });
        const url = URL.createObjectURL(blob);
        
        const link = document.createElement('a');
        link.href = url;
        link.download = 'booomerangs-image.svg';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        URL.revokeObjectURL(url);
      });
      
      // Функция для генерации изображения на canvas
      async function generateCanvasImage(prompt, theme) {
        return new Promise((resolve, reject) => {
          try {
            const width = 800;
            const height = 600;
            
            // Создаем canvas
            const canvas = document.createElement('canvas');
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext('2d');
            
            // Заполняем фон в зависимости от темы
            if (theme === 'abstract' || theme === 'geometric') {
              // Градиентный фон для абстракции и геометрии
              const gradient = ctx.createLinearGradient(0, 0, width, height);
              gradient.addColorStop(0, '#3b82f6');
              gradient.addColorStop(1, '#6366f1');
              ctx.fillStyle = gradient;
              ctx.fillRect(0, 0, width, height);
            } else if (theme === 'space') {
              // Тёмный фон для космоса
              ctx.fillStyle = '#0f172a';
              ctx.fillRect(0, 0, width, height);
              
              // Добавляем звезды
              for (let i = 0; i < 500; i++) {
                const x = Math.random() * width;
                const y = Math.random() * height;
                const radius = Math.random() * 2;
                const opacity = Math.random();
                
                ctx.fillStyle = `rgba(255, 255, 255, ${opacity})`;
                ctx.beginPath();
                ctx.arc(x, y, radius, 0, Math.PI * 2);
                ctx.fill();
              }
              
              // Добавляем туманность
              const nebula = ctx.createRadialGradient(
                width * 0.7, height * 0.3, 0,
                width * 0.7, height * 0.3, width * 0.5
              );
              nebula.addColorStop(0, 'rgba(138, 43, 226, 0.4)');
              nebula.addColorStop(0.5, 'rgba(138, 43, 226, 0.1)');
              nebula.addColorStop(1, 'rgba(138, 43, 226, 0)');
              
              ctx.fillStyle = nebula;
              ctx.fillRect(0, 0, width, height);
            } else if (theme === 'nature') {
              // Градиент для природы
              const gradient = ctx.createLinearGradient(0, 0, 0, height);
              gradient.addColorStop(0, '#4ade80');
              gradient.addColorStop(1, '#2563eb');
              ctx.fillStyle = gradient;
              ctx.fillRect(0, 0, width, height);
              
              // Добавляем солнце
              const sun = ctx.createRadialGradient(
                width * 0.8, height * 0.2, 0,
                width * 0.8, height * 0.2, 50
              );
              sun.addColorStop(0, 'rgba(253, 224, 71, 1)');
              sun.addColorStop(1, 'rgba(253, 224, 71, 0)');
              
              ctx.fillStyle = sun;
              ctx.beginPath();
              ctx.arc(width * 0.8, height * 0.2, 60, 0, Math.PI * 2);
              ctx.fill();
              
              // Добавляем горы
              ctx.fillStyle = 'rgba(55, 65, 81, 0.8)';
              ctx.beginPath();
              ctx.moveTo(0, height);
              ctx.lineTo(width * 0.2, height * 0.5);
              ctx.lineTo(width * 0.4, height * 0.7);
              ctx.lineTo(width * 0.6, height * 0.4);
              ctx.lineTo(width * 0.8, height * 0.6);
              ctx.lineTo(width, height * 0.5);
              ctx.lineTo(width, height);
              ctx.closePath();
              ctx.fill();
            } else if (theme === 'city') {
              // Градиент для города
              const gradient = ctx.createLinearGradient(0, 0, 0, height);
              gradient.addColorStop(0, '#1e293b');
              gradient.addColorStop(0.7, '#475569');
              gradient.addColorStop(1, '#64748b');
              ctx.fillStyle = gradient;
              ctx.fillRect(0, 0, width, height);
              
              // Добавляем силуэты зданий
              ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
              
              // Создаем случайные здания
              for (let i = 0; i < 20; i++) {
                const buildingWidth = 30 + Math.random() * 70;
                const buildingHeight = 100 + Math.random() * 300;
                const x = i * 45;
                
                ctx.fillRect(x, height - buildingHeight, buildingWidth, buildingHeight);
                
                // Добавляем окна
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                
                for (let j = 0; j < 10; j++) {
                  for (let k = 0; k < 5; k++) {
                    if (Math.random() > 0.3) {
                      ctx.fillRect(
                        x + 5 + k * 10, 
                        height - buildingHeight + 10 + j * 30, 
                        5, 
                        15
                      );
                    }
                  }
                }
                
                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
              }
            }
            
            // Добавляем элементы в зависимости от темы
            if (theme === 'abstract' || theme === 'geometric') {
              // Добавляем случайные геометрические фигуры
              for (let i = 0; i < 30; i++) {
                const x = Math.random() * width;
                const y = Math.random() * height;
                const size = 20 + Math.random() * 100;
                
                ctx.fillStyle = `rgba(255, 255, 255, ${Math.random() * 0.5})`;
                
                // Выбираем случайную форму
                const shape = Math.floor(Math.random() * 3);
                
                if (shape === 0 || theme === 'geometric') {
                  // Круг
                  ctx.beginPath();
                  ctx.arc(x, y, size/2, 0, Math.PI * 2);
                  ctx.fill();
                } else if (shape === 1 || theme === 'geometric') {
                  // Квадрат
                  ctx.save();
                  ctx.translate(x, y);
                  ctx.rotate(Math.random() * Math.PI * 2);
                  ctx.fillRect(-size/2, -size/2, size, size);
                  ctx.restore();
                } else {
                  // Треугольник
                  ctx.beginPath();
                  ctx.moveTo(x, y - size/2);
                  ctx.lineTo(x - size/2, y + size/2);
                  ctx.lineTo(x + size/2, y + size/2);
                  ctx.closePath();
                  ctx.fill();
                }
              }
            } else if (theme === 'space') {
              // Добавляем планету
              const planetX = width * 0.3;
              const planetY = height * 0.5;
              const planetRadius = 80;
              
              // Основная часть планеты
              const planetGradient = ctx.createRadialGradient(
                planetX - 20, planetY - 20, 0,
                planetX, planetY, planetRadius
              );
              
              planetGradient.addColorStop(0, '#60a5fa');
              planetGradient.addColorStop(1, '#1d4ed8');
              
              ctx.fillStyle = planetGradient;
              ctx.beginPath();
              ctx.arc(planetX, planetY, planetRadius, 0, Math.PI * 2);
              ctx.fill();
              
              // Добавляем детали на планету
              ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
              
              // Континенты
              for (let i = 0; i < 5; i++) {
                ctx.beginPath();
                const startX = planetX + (Math.random() - 0.5) * planetRadius;
                const startY = planetY + (Math.random() - 0.5) * planetRadius;
                
                ctx.moveTo(startX, startY);
                
                for (let j = 0; j < 5; j++) {
                  const controlX1 = startX + (Math.random() - 0.5) * 50;
                  const controlY1 = startY + (Math.random() - 0.5) * 50;
                  const controlX2 = startX + (Math.random() - 0.5) * 50;
                  const controlY2 = startY + (Math.random() - 0.5) * 50;
                  const endX = startX + (Math.random() - 0.5) * 50;
                  const endY = startY + (Math.random() - 0.5) * 50;
                  
                  ctx.bezierCurveTo(controlX1, controlY1, controlX2, controlY2, endX, endY);
                }
                
                ctx.closePath();
                ctx.fill();
              }
            }
            
            // Добавляем текст запроса
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            ctx.textAlign = 'center';
            
            // Заголовок BOOOMERANGS
            ctx.font = 'bold 32px Arial';
            ctx.fillText('BOOOMERANGS', width/2, height - 40);
            
            // Разбиваем текст по строкам
            const words = prompt.split(' ');
            let line = '';
            const lines = [];
            const maxWidth = width - 100;
            
            ctx.font = 'bold 24px Arial';
            
            for (let i = 0; i < words.length; i++) {
              const testLine = line + words[i] + ' ';
              const metrics = ctx.measureText(testLine);
              
              if (metrics.width > maxWidth && i > 0) {
                lines.push(line);
                line = words[i] + ' ';
              } else {
                line = testLine;
              }
            }
            
            lines.push(line);
            
            // Рисуем каждую строку текста
            for (let i = 0; i < lines.length; i++) {
              ctx.fillText(lines[i], width/2, 50 + (i * 30));
            }
            
            // Преобразуем canvas в URL данных
            const imageData = canvas.toDataURL('image/png');
            resolve(imageData);
          } catch (error) {
            reject(error);
          }
        });
      }
      
      // Функция для конвертации изображения в SVG
      async function convertToSVG(imageData, prompt) {
        return new Promise((resolve, reject) => {
          try {
            // Создаем базовый SVG-документ
            const svgData = `
            <svg xmlns="http://www.w3.org/2000/svg" width="800" height="600" viewBox="0 0 800 600">
              <defs>
                <linearGradient id="bg-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#6366f1;stop-opacity:1" />
                </linearGradient>
                
                <filter id="blur-filter">
                  <feGaussianBlur stdDeviation="2" />
                </filter>
                
                <filter id="noise" x="0%" y="0%" width="100%" height="100%">
                  <feTurbulence type="fractalNoise" baseFrequency="0.05" numOctaves="2" result="turbulence"/>
                  <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="5" xChannelSelector="R" yChannelSelector="G"/>
                </filter>
                
                <pattern id="dots" width="10" height="10" patternUnits="userSpaceOnUse">
                  <circle cx="5" cy="5" r="1" fill="white" fill-opacity="0.3" />
                </pattern>
              </defs>
              
              <!-- Фоновый прямоугольник -->
              <rect width="800" height="600" fill="url(#bg-gradient)" />
              
              <!-- Добавляем изображение как базу -->
              <image href="${imageData}" width="800" height="600" opacity="0.9" />
              
              <!-- Накладываем эффект размытия на края -->
              <rect x="0" y="0" width="800" height="600" fill="url(#bg-gradient)" opacity="0.3" filter="url(#blur-filter)" />
              
              <!-- Добавляем узор -->
              <rect width="800" height="600" fill="url(#dots)" opacity="0.3" />
              
              <!-- Добавляем текст BOOOMERANGS -->
              <rect x="0" y="520" width="800" height="80" fill="rgba(0,0,0,0.5)" />
              <text x="400" y="570" font-family="Arial" font-size="32" font-weight="bold" text-anchor="middle" fill="white">
                BOOOMERANGS
              </text>
              
              <!-- Добавляем оригинальный запрос -->
              <text x="400" y="30" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
                ${prompt || 'Абстрактное изображение'}
              </text>
            </svg>
            `;
            
            resolve(svgData);
          } catch (error) {
            reject(error);
          }
        });
      }
    });
  </script>
</body>
</html>